# 関数当てゲーム
部内ハッカソン チーム『二重振り子』のリポジトリ
フロントエンドをNext.js、バックエンドをPython+FastAPIで記述した関数当てゲームである。

## ゲームの流れ
1. フロントでゲーム開始のボタンをクリック
2. バックが問題を生成、最初のヒントとなる文をフロントに返す。
3. フロントで数式の解答、もしくは関数に関する質問をバックに送る。
4. バックは送られた文が数式なら解答判定、質問ならそれに解答した文をフロントに返す。
5. 制限時間が来るか正解するまで3~4を繰り返す。制限時間はバックが管理し来たらフロントに知らせる。

## フロントの役割
### URL設計
- `/`  
  ホームページ。ここにゲームを開始するボタンを配置する。
    
- `/game/{session_hash}`  
  セッションのハッシュ値を使ってgame画面に移行する。
  ここでチャット形式の数式の解答と質問を行う。
    
- `/result/{session_hash}`  
  正解するか、制限時間が来た時にこのページに行く。関数の数式やグラフ、質問回答のチャット履歴をここで見ることができ、終わったら`/`へ帰る。
    
## バックの役割
### API設計
`session_hash`で問題の判別を行っている。`localhost:3000/game/api/~`でAPIを提供している。

- `/start`  
  問題生成+ハッシュ生成とハッシュの提供
    
- `/{session_hash}/is_alive`  
  問題が存在していて解答中の問題であるもののみ有効として返す。

- `/{session_hash}/image`  
  問題のヒントとして関数グラフの画像を返す。

- `/{session_hash}/chat`  
  AIによる自然言語の質問対応を行う。

- `/{session_hash}/answer`  
  ANSWERコマンドによる問題解答判定を行い返す。

- `/{session_hash}/input`  
  INPUTコマンドによる値の代入したときの関数値を返す。

- `/{session_hash}/result`  
  問題が存在して解答が終わっているものを有効として結果を返す。

      